(function(){"use strict";var t={9901:function(t,e,n){var r=n(9242),a=n(3396);const o={class:"row justify-content-center"},u={class:"col-10 col-md-6 d-flex flex-column align-items-center"},s=(0,a._)("h1",{class:"text-center my-4"},"Генератор sitemap",-1),i=(0,a._)("button",{type:"submit",class:"btn btn-outline-dark my-3 py-2 col-8 col-md-4"}," Создать ",-1),l=["href"];function c(t,e,n,c,p,d){const f=(0,a.up)("custom-input"),m=(0,a.up)("status-bar");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",u,[s,"start"==p.status?((0,a.wg)(),(0,a.iD)("form",{key:0,class:"w-100 d-flex flex-column align-items-center",onSubmit:e[1]||(e[1]=(0,r.iM)(((...t)=>d.sendSiteUrl&&d.sendSiteUrl(...t)),["prevent"]))},[(0,a.Wm)(f,{type:"url",placeholder:"https://example.com",required:"",class:"form-control p-2",modelValue:p.siteUrl,"onUpdate:modelValue":e[0]||(e[0]=t=>p.siteUrl=t),modelModifiers:{trim:!0}},null,8,["modelValue"]),i],32)):"loading"==p.status?((0,a.wg)(),(0,a.j4)(m,{key:1,current:p.current,totalCount:p.totalCount},null,8,["current","totalCount"])):"ready"==p.status?(0,a.WI)(t.$slots,"default",{key:2},(()=>[(0,a._)("a",{href:p.loadLink,class:"btn btn-outline-dark my-3 py-2 col-8 col-md-4"}," Скачать ",8,l),(0,a._)("button",{onClick:e[2]||(e[2]=()=>{p.status="start"}),class:"btn btn-outline-dark my-3 py-2 col-8 col-md-4"}," На главную ")])):(0,a.kq)("",!0)])])}const p=["value"];function d(t,e,n,r,o,u){return(0,a.wg)(),(0,a.iD)("input",{value:n.modelValue,onInput:e[0]||(e[0]=(...t)=>u.updateInput&&u.updateInput(...t)),class:"input",type:"text"},null,40,p)}var f={name:"CustomInput",props:{modelValue:[String,Number]},methods:{updateInput(t){this.$emit("update:modelValue",t.target.value)}}},m=n(89);const h=(0,m.Z)(f,[["render",d]]);var v=h,g=n(6265),b=n.n(g),k=n(7139);const y=(0,a._)("h3",null,"Генерируем ваш файл",-1),w={class:"progress w-100 my-3"},C=["aria-sort"],_={class:"progress-counter"};function x(t,e,n,r,o,u){return(0,a.wg)(),(0,a.iD)(a.HY,null,[y,(0,a._)("div",w,[(0,a._)("div",{class:"progress-bar",role:"progressbar","aria-sort":n.totalCount>0?n.current/n.totalCount*100:0,"aria-valuemin":"0","aria-valuemax":"100",style:(0,k.j5)({width:n.totalCount>0?n.current/n.totalCount*100+"%":0})},null,12,C)]),(0,a._)("div",_,[(0,a._)("p",null,(0,k.zw)(n.current+"/"+n.totalCount),1)])],64)}var S={name:"StatusBar",props:{current:{Number:Number,default:0},totalCount:{Number:Number,default:0}}};const O=(0,m.Z)(S,[["render",x]]);var j=O,U={name:"App",components:{CustomInput:v,StatusBar:j},data(){return{siteUrl:"",taskStatus:"",loadLink:"",current:0,totalCount:0,status:"start"}},methods:{sendSiteUrl(){b().post("https://api.sitemap-generator.ru/task",{origin:this.siteUrl,email:""}).then((t=>{setTimeout((()=>{this.checkStatus(t.data.id)}),100),this.status="loading"})).catch((function(t){alert(t)}))},checkStatus(t){b().get(`https://api.sitemap-generator.ru/task/stats/${t}`).then((e=>{void 0==e.data.finished?(this.current=e.data.current,this.totalCount=e.data.totalCount,setTimeout((()=>{this.checkStatus(t)}),400)):(this.taskStatus=e.data.finished,this.createDownloadLink(t))})).catch((function(t){alert(t)}))},createDownloadLink(t){b().get(`https://api.sitemap-generator.ru/task/${t}`).then((t=>{this.loadLink=`https://api.sitemap-generator.ru/sitemap/${t.data.sitemap}`,this.siteUrl="",this.status="ready"})).catch((function(t){alert(t)}))}}};const I=(0,m.Z)(U,[["render",c]]);var D=I;(0,r.ri)(D).mount("#app")}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.m=t,function(){var t=[];n.O=function(e,r,a,o){if(!r){var u=1/0;for(c=0;c<t.length;c++){r=t[c][0],a=t[c][1],o=t[c][2];for(var s=!0,i=0;i<r.length;i++)(!1&o||u>=o)&&Object.keys(n.O).every((function(t){return n.O[t](r[i])}))?r.splice(i--,1):(s=!1,o<u&&(u=o));if(s){t.splice(c--,1);var l=a();void 0!==l&&(e=l)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[r,a,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var a,o,u=r[0],s=r[1],i=r[2],l=0;if(u.some((function(e){return 0!==t[e]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(i)var c=i(n)}for(e&&e(r);l<u.length;l++)o=u[l],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(c)},r=self["webpackChunksite_map_generator"]=self["webpackChunksite_map_generator"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(9901)}));r=n.O(r)})();
//# sourceMappingURL=app.db87844a.js.map